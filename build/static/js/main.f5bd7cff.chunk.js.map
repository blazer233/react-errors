{"version":3,"sources":["hanlder/core.js","hanlder/index.js","App.js","reportWebVitals.js","index.js"],"names":["initialState","error","ErrorBoundary","state","resetErrorBoundary","props","onReset","setState","errorInfo","this","onError","componentStack","fallback","FallbackComponent","fallbackRender","fallbackProps","React","isValidElement","Error","children","Component","catchreacterror","Boundary","DefaultErrorBoundary","InnerComponent","fnCount2","count","errorbackfn","message","onClick","errorbackcom","SafeCount1","SafeCount2","App","useState","setCount","ListenError","arg","info","console","log","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"iQACMA,EAAe,CAAEC,OAAO,GAyCfC,E,4MAvCbC,MAAQH,E,EAWRI,mBAAqB,WACf,EAAKC,MAAMC,SAAS,EAAKD,MAAMC,UACnC,EAAKC,SAASP,I,uDAThB,SAAkBC,EAAOO,GACnBC,KAAKJ,MAAMK,SACbD,KAAKJ,MAAMK,QAAQT,EAAOO,EAAUG,kB,oBASxC,WAAU,IAAD,EACiDF,KAAKJ,MAArDO,EADD,EACCA,SAAUC,EADX,EACWA,kBAAmBC,EAD9B,EAC8BA,eAC7Bb,EAAUQ,KAAKN,MAAfF,MACR,GAAIA,EAAO,CACT,IAAMc,EAAgB,CACpBd,QACAG,mBAAoBK,KAAKL,oBAE3B,GAAIY,IAAMC,eAAeL,GACvB,OAAOA,EAET,GAA8B,oBAAnBE,EACT,OAAOA,EAAeC,GAExB,GAAIF,EACF,OAAO,cAACA,EAAD,eAAuBE,IAEhC,MAAM,IAAIG,MAAM,+DAGlB,OAAOT,KAAKJ,MAAMc,Y,uCAlCpB,SAAgClB,GAC9B,MAAO,CAAEA,a,GAHee,IAAMI,WCQnBC,EARS,eAACC,EAAD,uDAAYC,EAAZ,OAAqC,SAAAC,GAC3D,OAAO,SAAAnB,GAAK,OACV,cAACiB,EAAD,2BAAcjB,GAAd,aACE,cAACmB,EAAD,eAAoBnB,UCEpBoB,G,kKACJ,WAAU,IACAC,EAAUjB,KAAKJ,MAAfqB,MACR,GAAa,GAATA,EAAY,MAAM,IAAIR,MAAM,gBAChC,OAAO,+BAAOQ,Q,GAJKV,IAAMI,YAOvBO,EAAc,SAAC,GAAD,IAAYC,EAAZ,EAAG3B,MAAS2B,QAAWxB,EAAvB,EAAuBA,mBAAvB,OAClB,gCACE,mDACA,8BAAMwB,IACN,wBAAQC,QAASzB,EAAjB,2BAGE0B,EAAe,kBAAM,8EACrBC,EAAaV,KAnBF,SAAC,GAAe,IAAbK,EAAY,EAAZA,MAClB,GAAa,GAATA,EAAY,MAAM,IAAIR,MAAM,kBAChC,OAAO,+BAAOQ,OAkBVM,EAAaX,IAAkBI,GAkCtBQ,EAhCH,WAAO,IAAD,EACUC,mBAAS,GADnB,mBACTR,EADS,KACFS,EADE,KAEVC,EAAc,SAACC,EAAKC,GAAN,OAAeC,QAAQC,IAAI,sBAASH,EAAIT,QAASU,IAErE,OACE,sBAAKG,UAAU,MAAf,UACE,oCACE,wBAAQZ,QAAS,kBAAMM,GAAS,SAAAT,GAAK,OAAIA,EAAQ,MAAjD,eACA,wBAAQG,QAAS,kBAAMM,GAAS,SAAAT,GAAK,OAAIA,EAAQ,MAAjD,kBAEF,uBACA,mDAEE,cAACM,EAAD,CACEN,MAAOA,EACPZ,eAAgBa,EAChBrB,QAbQ,kBAAM6B,EAAS,IAcvBzB,QAAS0B,OAGb,sDAEE,cAACL,EAAD,CACEL,MAAOA,EACPb,kBAAmBiB,EACnBpB,QAAS0B,WCtCJM,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.f5bd7cff.chunk.js","sourcesContent":["import React from \"react\";\r\nconst initialState = { error: false };\r\nclass ErrorBoundary extends React.Component {\r\n  state = initialState;\r\n  static getDerivedStateFromError(error) {\r\n    return { error };\r\n  }\r\n  componentDidCatch(error, errorInfo) {\r\n    if (this.props.onError) {\r\n      this.props.onError(error, errorInfo.componentStack);\r\n    }\r\n  }\r\n\r\n  // 执行自定义重置逻辑，并重置组件状态\r\n  resetErrorBoundary = () => {\r\n    if (this.props.onReset) this.props.onReset();\r\n    this.setState(initialState);\r\n  };\r\n  render() {\r\n    const { fallback, FallbackComponent, fallbackRender } = this.props;\r\n    const { error } = this.state;\r\n    if (error) {\r\n      const fallbackProps = {\r\n        error,\r\n        resetErrorBoundary: this.resetErrorBoundary,\r\n      };\r\n      if (React.isValidElement(fallback)) {\r\n        return fallback;\r\n      }\r\n      if (typeof fallbackRender === \"function\") {\r\n        return fallbackRender(fallbackProps);\r\n      }\r\n      if (FallbackComponent) {\r\n        return <FallbackComponent {...fallbackProps} />;\r\n      }\r\n      throw new Error(\"ErrorBoundary 组件需要传入 fallback\");\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","import React from \"react\";\r\nimport DefaultErrorBoundary from \"./core\";\r\nconst catchreacterror = (Boundary = DefaultErrorBoundary) => InnerComponent => {\r\n  return props => (\r\n    <Boundary {...props}>\r\n      <InnerComponent {...props} />\r\n    </Boundary>\r\n  );\r\n};\r\n\r\nexport default catchreacterror;\r\n","import React, { useState } from \"react\";\nimport catchreacterror from \"./hanlder\";\nimport \"./App.css\";\nconst fnCount1 = ({ count }) => {\n  if (count == 3) throw new Error(\"count is three\");\n  return <span>{count}</span>;\n};\nclass fnCount2 extends React.Component {\n  render() {\n    const { count } = this.props;\n    if (count == 2) throw new Error(\"count is two\");\n    return <span>{count}</span>;\n  }\n}\nconst errorbackfn = ({ error: { message }, resetErrorBoundary }) => (\n  <div>\n    <p>出错啦</p>\n    <pre>{message}</pre>\n    <button onClick={resetErrorBoundary}>Try again</button>\n  </div>\n);\nconst errorbackcom = () => <h1>出错啦,不可撤销</h1>;\nconst SafeCount1 = catchreacterror()(fnCount1);\nconst SafeCount2 = catchreacterror()(fnCount2);\n\nconst App = () => {\n  const [count, setCount] = useState(0);\n  const ListenError = (arg, info) => console.log(\"出错了:\" + arg.message, info);\n  const onReset = () => setCount(0);\n  return (\n    <div className=\"App\">\n      <section>\n        <button onClick={() => setCount(count => count + 1)}>+</button>\n        <button onClick={() => setCount(count => count - 1)}>-</button>\n      </section>\n      <hr />\n      <div>\n        Class componnet:\n        <SafeCount2\n          count={count}\n          fallbackRender={errorbackfn}\n          onReset={onReset}\n          onError={ListenError}\n        />\n      </div>\n      <div>\n        Function componnet:\n        <SafeCount1\n          count={count}\n          FallbackComponent={errorbackcom}\n          onError={ListenError}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}